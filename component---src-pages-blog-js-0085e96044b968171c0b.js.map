{"version":3,"file":"component---src-pages-blog-js-0085e96044b968171c0b.js","mappings":"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","sources":["webpack://e-trifonova/./src/components/breadcrumb/breadcrumb.js","webpack://e-trifonova/./src/components/header/header.js","webpack://e-trifonova/./src/components/footer/footer.js","webpack://e-trifonova/./src/components/layout/layout.js","webpack://e-trifonova/./src/components/seo.js","webpack://e-trifonova/./src/components/sidebar/sidebar.js","webpack://e-trifonova/./src/pages/blog.js"],"sourcesContent":["import React from \"react\"\r\nimport { Link } from \"gatsby\"\r\nimport \"./breadcrumb.css\"\r\n\r\nconst BreadCrumb = ({ category, postTitle }) => (\r\n  <div className=\"breadcrumb_container\">\r\n    <Link className=\"breadcrumb_link\"to=\"/\">\r\n      <span>На главную</span>\r\n    </Link>\r\n    <div className=\"arrow__container\"><i class=\"arrow right\"></i></div>\r\n    <Link className=\"breadcrumb_link\" to=\"/blog\">\r\n      <span>Блог</span>\r\n    </Link>\r\n    \r\n    {category ? (\r\n      <>\r\n    <div className=\"arrow__container\"><i class=\"arrow right\"></i></div>\r\n        <Link className=\"breadcrumb_link\" to=\"/\">\r\n      <span>{category}</span>\r\n        </Link>\r\n      </>\r\n    ) : null}\r\n\r\n    \r\n    {postTitle ? (\r\n      <>\r\n    <div className=\"arrow__container\"><i class=\"arrow right\"></i></div>\r\n        <Link className=\"breadcrumb_link\" to=\"/\">\r\n      <span>{postTitle}</span>\r\n        </Link>\r\n      </>\r\n    ) : null}\r\n  </div>\r\n)\r\n\r\nexport default BreadCrumb\r\n","import * as React from \"react\";\r\nimport { Link } from \"gatsby\";\r\nimport Logo from \"../../assets/svg/logo.svg\";\r\nimport \"./header.css\";\r\n\r\nconst Header = ({ siteTitle }) => (\r\n  <header className=\"grid-container\">\r\n    <div className=\"header__container\">\r\n      <Link className=\"header__logo\" to=\"/\">\r\n        <Logo className=\"header__logo-img\" />\r\n      </Link>\r\n      <nav>\r\n        <ul className=\"nav__list\">\r\n          <li className=\"nav__list-item\">\r\n            <Link className=\"nav__link\" to=\"/about\"\r\n            activeClassName=\"active\">\r\n              Автор\r\n            </Link>\r\n          </li>\r\n          <li>\r\n            <Link className=\"nav__link\" to=\"/blog\"\r\n            activeClassName=\"active\">\r\n              Блог\r\n            </Link>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n    </div>\r\n  </header>\r\n);\r\n\r\nexport default Header;\r\n","import * as React from \"react\"\r\nimport { Link } from \"gatsby\"\r\nimport \"./footer.css\"\r\n\r\nconst Footer = () => {\r\n  return (\r\n    <footer className=\"grid-container\">\r\n      <div className=\"footer_copyright\">\r\n        © {new Date().getFullYear()} &middot; Елена Трифонова\r\n      </div>\r\n      {/* <div className=\"footer_social-list\">\r\n        <ul>\r\n          <li>\r\n            <a\r\n              href=\"https://web.telegram.org/\"\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >\r\n              <div className=\"footer_icon\">TG</div>\r\n            </a>\r\n          </li>\r\n          <li>\r\n            <a href=\"https://vk.com/\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n              <div className=\"footer_icon\">VK</div>\r\n            </a>\r\n          </li>\r\n          <li>\r\n            <a\r\n              href=\"https://github.com/\"\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >\r\n              <div className=\"footer_icon\">GH</div>\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </div> */}\r\n    </footer>\r\n  )\r\n}\r\n\r\nexport default Footer\r\n","import * as React from \"react\"\r\nimport { useStaticQuery, graphql } from \"gatsby\"\r\n\r\nimport Header from \"../header/header\"\r\nimport Footer from \"../footer/footer\"\r\nimport \"./layout.css\"\r\n\r\nconst Layout = ({ children }) => {\r\n  const data = useStaticQuery(graphql`\r\n    query SiteTitleQuery {\r\n      site {\r\n        siteMetadata {\r\n          title\r\n        }\r\n      }\r\n    }\r\n  `)\r\n  return (\r\n    <div className=\"page-container\">\r\n      <Header siteTitle={data.site.siteMetadata?.title || `Title`} />\r\n      <main className=\"grid-container\">{children}</main>\r\n      <Footer />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Layout\r\n","import * as React from \"react\";\r\nimport { graphql, useStaticQuery } from \"gatsby\";\r\n\r\nconst Seo = ({ description, title, children }) => {\r\n  const { site } = useStaticQuery(graphql`\r\n    query {\r\n      site {\r\n        siteMetadata {\r\n          title\r\n          description\r\n          author\r\n        }\r\n      }\r\n    }\r\n  `);\r\n\r\n  const metaDescription = description || site.siteMetadata.description;\r\n  const defaultTitle = site.siteMetadata?.title;\r\n\r\n  return (\r\n    <>\r\n      <title>{defaultTitle ? `${title} | ${defaultTitle}` : title}</title>\r\n      <meta name=\"description\" content={metaDescription} />\r\n      <meta property=\"og:title\" content={title} />\r\n      <meta property=\"og:description\" content={metaDescription} />\r\n      <meta property=\"og:type\" content=\"website\" />\r\n      <meta name=\"twitter:card\" content=\"summary\" />\r\n      <meta name=\"twitter:creator\" content={site.siteMetadata?.author || ``} />\r\n      <meta name=\"twitter:title\" content={title} />\r\n      <meta name=\"twitter:description\" content={metaDescription} />\r\n      {children}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Seo;\r\n","import React from 'react'\r\nimport './sidebar.css'\r\n\r\nconst sidebar = ({ category }) => {\r\n  return (\r\n    <div className=\"sidebar_container\">\r\n      <h4>Категории:</h4>\r\n      {category}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default sidebar","import React, { useState, useEffect } from \"react\"\r\nimport { Link, graphql } from \"gatsby\"\r\nimport Layout from \"../components/layout/layout\"\r\nimport SEO from \"../components/seo\"\r\nimport BreadCrumb from \"../components/breadcrumb/breadcrumb\"\r\nimport Sidebar from \"../components/sidebar/sidebar\"\r\n\r\nexport default function Blog({ data }) {\r\n  const posts = data.allWpPost.nodes\r\n\r\n  // State to track selected category and current page\r\n  const [selectedCategory, setSelectedCategory] = useState(null)\r\n  const [currentPage, setCurrentPage] = useState(1)\r\n\r\n\r\n  // Collect all categories across posts\r\n  const allCategories = posts.flatMap(post =>\r\n    post.categories.nodes.map(category => category.name)\r\n  );\r\n\r\n  // Filter unique categories using Set\r\n  const uniqueCategories = [...new Set(allCategories)];\r\n\r\n  // Function to handle category selection\r\n  const handleCategoryClick = (category) => {\r\n    setSelectedCategory(category === selectedCategory ? null : category);\r\n    setCurrentPage(1); // Reset to the first page when selecting a new category\r\n  };\r\n\r\n   // Function to reset the filter\r\n  const resetFilter = () => {\r\n    setSelectedCategory(null); // Reset to show all posts\r\n  };\r\n\r\n  // Filter posts by selected category\r\n  const filteredPosts = selectedCategory\r\n    ? posts.filter(post =>\r\n        post.categories.nodes.some(category => category.name === selectedCategory)\r\n      )\r\n    : posts; // Show all posts if no category is selected\r\n\r\n\r\n  // Constants for pagination\r\n  const postsPerPage = 5\r\n  // Calculate total pages based on the filtered posts\r\nconst totalPosts = filteredPosts.length\r\nconst totalPages = Math.ceil(totalPosts / postsPerPage)\r\n\r\n  // Calculate start and end index for posts based on current page\r\n  const startIndex = (currentPage - 1) * postsPerPage\r\n  const endIndex = startIndex + postsPerPage\r\n\r\n  // Get posts to display based on pagination\r\n  const paginatedPosts = filteredPosts.slice(startIndex, endIndex)\r\n\r\n// Scroll to bottom function\r\nconst scrollToBottom = () => {\r\n  window.scrollTo({\r\n    top: document.body.scrollHeight,\r\n    behavior: 'smooth',\r\n  });\r\n};\r\n\r\n// Updated pagination handlers\r\nconst nextPage = () => {\r\n  setCurrentPage(prev => {\r\n    const newPage = Math.min(prev + 1, totalPages);\r\n    if (newPage !== prev) scrollToBottom();\r\n    return newPage;\r\n  });\r\n};\r\n\r\nconst prevPage = () => {\r\n  setCurrentPage(prev => {\r\n    const newPage = Math.max(prev - 1, 1);\r\n    if (newPage !== prev) scrollToBottom();\r\n    return newPage;\r\n  });\r\n};\r\n\r\n  const category = (\r\n    <ul className=\"category_list\">\r\n      {uniqueCategories.map((category, index) => (\r\n        <li key={index}>\r\n          <button\r\n            onClick={() => handleCategoryClick(category)}\r\n            className={selectedCategory === category ? 'active category_btn' : 'category_btn'}\r\n          >\r\n            {category}\r\n          </button>\r\n        </li>\r\n      ))}\r\n      <button className=\"category_btn filter_btn\" onClick={resetFilter}>Сбросить фильтр</button>\r\n    </ul>\r\n  );\r\n\r\n  // Function to limit excerpt length and add link\r\n  const getLimitedExcerpt = (htmlString, charLimit, slug) => {\r\n    // Remove HTML tags\r\n    const textOnly = htmlString.replace(/<[^>]+>/g, '');\r\n    // Truncate to specified length and add link if truncated\r\n    if (textOnly.length > charLimit) {\r\n      return (\r\n        <>\r\n          {textOnly.substring(0, charLimit)}\r\n          <Link to={`/blog/${slug}`} className=\"read-more\"> [...]</Link>\r\n        </>\r\n      );\r\n    }\r\n    return textOnly;\r\n  };\r\n\r\n  return (\r\n    <Layout>\r\n      <SEO title=\"blog\" />\r\n      <section className=\"blog\">\r\n        <BreadCrumb className=\"blog__breadcrumb\" />\r\n        <Sidebar className=\"blog_sidebar\" category={category} />\r\n        <div className=\"blog_posts\">\r\n          <h1>Блог</h1>\r\n          <h4>{selectedCategory ? `Посты в категории \"${selectedCategory}\"` : 'Все посты'}</h4>\r\n\r\n          {paginatedPosts.length > 0 ? paginatedPosts.map(post => (\r\n            <div key={post.slug}>\r\n              <Link to={post.slug}>\r\n                <p>{post.title}</p>\r\n              </Link>\r\n              <p className=\"post_category\" >Категория: {post.categories.nodes.map(category => category.name).join(\", \")}</p>\r\n              <p>{getLimitedExcerpt(post.excerpt, 200, post.slug)}</p>\r\n            </div>\r\n          )) : <p className=\"post_category\">Постов не найдено.</p>}\r\n\r\n          {/* Pagination controls */}\r\n          <div className=\"pagination\">\r\n            {currentPage > 0 && (\r\n              <button className=\"pagination-btn\" onClick={prevPage} disabled={currentPage === 1}>&#8592;</button>\r\n            )}\r\n            <span>Страница {currentPage} из {totalPages}</span>\r\n            {currentPage <= totalPages && (\r\n              <button className=\"pagination-btn\" onClick={nextPage} disabled={currentPage === totalPages}>&#8594;</button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </Layout>\r\n  )\r\n}\r\n\r\nexport const pageQuery = graphql`\r\n  query blogPostsQuery {\r\n    allWpPost(sort: { date: DESC }) {\r\n      nodes {\r\n        title\r\n        excerpt\r\n        content\r\n        slug\r\n        categories {\r\n          nodes {\r\n            name\r\n            id\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n`\r\n"],"names":["category","postTitle","className","to","class","siteTitle","activeClassName","Date","getFullYear","children","data","useStaticQuery","site","siteMetadata","title","description","metaDescription","defaultTitle","name","content","property","author","Blog","posts","allWpPost","nodes","selectedCategory","setSelectedCategory","useState","currentPage","setCurrentPage","allCategories","flatMap","post","categories","map","uniqueCategories","Set","filteredPosts","filter","some","totalPosts","length","totalPages","Math","ceil","startIndex","endIndex","paginatedPosts","slice","scrollToBottom","window","scrollTo","top","document","body","scrollHeight","behavior","index","key","onClick","handleCategoryClick","slug","join","htmlString","charLimit","textOnly","replace","substring","getLimitedExcerpt","excerpt","prev","newPage","max","disabled","min"],"sourceRoot":""}